/*
 * Copyright (c) 2025 Arribada Initiative
 * SPDX-License-Identifier: Apache-2.0
 *
 * SPI Debug overlay for Adafruit Feather nRF52840
 *
 * Wiring (Feather -> Argos SMD/STM32):
 * - SCK  (P0.14) -> SPI_CLK  (STM32 PA1)
 * - MOSI (P0.13) -> SPI_MOSI (STM32 PB5)
 * - MISO (P0.15) -> SPI_MISO (STM32 PB4)
 * - CS   (P0.10) -> SPI_NSS  (STM32 PA15)
 * - RST  (P0.07) -> RESET    (optional)
 */

/* Disable NFC to use P0.09/P0.10 as GPIO */
&uicr {
	nfct-pins-as-gpios;
};

&spi1 {
	compatible = "nordic,nrf-spim";
	status = "okay";
	cs-gpios = <&gpio0 10 GPIO_ACTIVE_LOW>;

	argos_smd: argos-smd@0 {
		compatible = "arribada,argos-smd-spi";
		reg = <0>;
		spi-max-frequency = <125000>;  /* 125 kHz - minimum for nRF52840 */
		reset-gpios = <&gpio0 7 GPIO_ACTIVE_LOW>;
	};
};
